<!-- views/posts/index.ejs -->

<%- include('./../partials/head', {title: "Posts"}); %>

<div class="mx-auto max-w-3xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">
    <h1 class="sr-only">Page title</h1>
    <!-- Main 3 column grid -->
    <div class="grid grid-cols-1 items-start gap-4 lg:grid-cols-3 lg:gap-8">
        <!-- Left column -->
        <div class="grid grid-cols-1 gap-4 lg:col-span-2">
            <section aria-labelledby="section-1-title">
            <h2 class="sr-only" id="section-1-title">Section title</h2>
            <div class="overflow-hidden rounded-lg bg-white shadow">
                <div class="p-6">
                    <% if (message.length > 0) { %>
                        <div class="bg-yellow-100 p-10 mb-20">
                            <ul>
                                <% message.forEach(msg => { %>
                                    <li><%= msg %></li>
                                <% }); %>
                            </ul>
                        </div>
                    <% } %>

                    <!-- Main 3 column grid -->
                    <div class="w-full">
                        <% posts.forEach(post => { %>
                            <div class="mt-10 max-w-xl">
                                <a href="/posts/slug/<%= post.slug %>">
                                    <h2 class="text-xl font-bold"><%= post.title %></h2>
                                </a>
                                <p class="mt-1 text-xs text-gray-500">Posted: <%= moment(post.created_at).fromNow()%></p>
                                <p class="mt-3 text-sm"><%= post.content %></p>
                            </div>
                        <% }); %>
                    </div>
                </div>
                </div>
            </section>
        </div>

        <!-- Right column -->
        <div class="grid grid-cols-1 gap-4">
        <section aria-labelledby="section-2-title">
            <h2 class="sr-only" id="section-2-title">Section title</h2>
            <div class="overflow-hidden rounded-lg bg-white shadow">
            <div class="p-6">
                <a type="button" href="/create" class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">New post</a>
                <p class="mt-8 text-xs text-gray-500">To add a new post, click "Add Post" button, which will redirect you to the post creation page/form. From there, you can fill in the details of your new post and submit it.</p>
            </div>
            </div>
        </section>
        </div>
    </div>
</div>






<%- include('./../partials/footer'); %>